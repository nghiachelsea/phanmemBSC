Bảng đơn vị

CREATE DEFINER=`root`@`localhost` PROCEDURE `addDonvi`(
	IN maDv VARCHAR(10), 
	IN tenDv VARCHAR(100), 
	IN ten_Viettat VARCHAR(20), 
	IN loaiDv VARCHAR(100), 
	IN trangthaiDv VARCHAR(100))
BEGIN
	INSERT INTO donvi (maDonvi,tenDonvi,tenViettat,loaiDonvi, trangthaiDonvi) 
	VALUES (maDv, tenDv, ten_Viettat, loaiDv, trangthaiDv);
END




CREATE DEFINER=`root`@`localhost` PROCEDURE `editDonvi`(
	IN maDv VARCHAR(10), 
	IN tenDv VARCHAR(100), 
	IN ten_Viettat VARCHAR(20), 
	IN loaiDv VARCHAR(100), 
	IN trangthaiDv VARCHAR(100))
BEGIN
	update donvi set tenDonvi=tenDv, tenViettat=ten_Viettat, loaiDonvi=loaiDv, trangthaiDonvi=trangthaiDv WHERE maDonvi = maDv ;
END



CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteDonvi`(
	IN maDv VARCHAR(10)
	)
BEGIN
	delete FROM donvi where maDonvi=maDv;
END


Bảng Trạm

CREATE DEFINER=`root`@`localhost` PROCEDURE `addTram`(
	IN ma_Tram VARCHAR(50), 
	IN ma_Donvi VARCHAR(10), 
	IN ma_Quanli VARCHAR(10), 
	IN ma_Giamsat VARCHAR(10), 
	IN ten_Tram VARCHAR(100),
    IN diachi_Tram VARCHAR(100),
    IN trangthai_Tram VARCHAR(100),
    In toado_X FLOAT,
    IN toado_Y FLOAT
    )
BEGIN
	INSERT INTO tram (maTram,maDonvi,maQuanli,maGiamsat,tenTram,diachiTram,trangthaiTram,toadoX,toadoY) 
	VALUES (ma_Tram, ma_Donvi, ma_Quanli, ma_Giamsat, ten_Tram, diachi_Tram, trangthai_Tram, toado_X, toado_y);
END



CREATE DEFINER=`root`@`localhost` PROCEDURE `editTram`(
	IN ma_Tram VARCHAR(50), 
	IN ma_Donvi VARCHAR(10), 
	IN ma_Quanli VARCHAR(10), 
	IN ma_Giamsat VARCHAR(10), 
	IN ten_Tram VARCHAR(100),
    IN diachi_Tram VARCHAR(100),
    IN trangThai_Tram VARCHAR(100),
    In toado_X FLOAT,
    IN toado_Y FLOAT
    )
BEGIN
	update tram set maDonvi=ma_Donvi, maQuanli=ma_Quanli, maGiamsat=ma_Giamsat, tenTram=ten_Tram, diachiTram=diachi_Tram, trangthaiTram=trangthai_Tram, toadoX=toado_X, toadoY=toado_Y WHERE maTram = ma_Tram ;
END





CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteTram`(
	in idTram varchar(50)
	)
BEGIN
	
    DELETE FROM tram where maTram = idTram;

END

Bảng người dùng

CREATE DEFINER=`root`@`localhost` PROCEDURE `addNguoiDung`(
	IN ma_ND VARCHAR(10), 
	IN ma_Donvi VARCHAR(10), 
	IN ten_ND VARCHAR(45), 
	IN tai_Khoan VARCHAR(20), 
	IN mat_Khau VARCHAR(100),
    IN loai_ND INT(11)
)
BEGIN
	INSERT INTO nguoidung (maND,maDonvi,tenND,taiKhoan, matKhau, loaiND) 
	VALUES (ma_ND, ma_Donvi, ten_ND, tai_Khoan, mat_Khau, loai_ND);
END

CREATE DEFINER=`root`@`localhost` PROCEDURE `editNguoiDung`(
	IN ma_ND VARCHAR(10), 
	IN ma_Donvi VARCHAR(10), 
	IN ten_ND VARCHAR(45), 
	IN tai_Khoan VARCHAR(20), 
	IN mat_Khau VARCHAR(100),
    IN loai_ND INT(11)
)
BEGIN
		update nguoidung set maND=ma_ND, maDonvi=ma_Donvi, tenND=ten_ND, taiKhoan=tai_Khoan, matKhau=mat_Khau, loaiND=loai_ND
        WHERE maND = ma_ND ;
END





	CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteNguoiDung`(
	IN ma_ND VARCHAR(10)
)
BEGIN
	
    delete FROM nguoidung where maND=ma_ND;

END


//Validation
CREATE DEFINER=`root`@`localhost` PROCEDURE `validation`(
	in tk varchar(10),
    in mk varchar(100)
)
BEGIN
	select * from nguoidung where taiKhoan = tk AND matKhau = mk;
END
//pass
CREATE DEFINER=`root`@`localhost` PROCEDURE `pass`(
	in tk varchar(10),
    in mk varchar(100)
)
BEGIN
	select * from nguoidung where  taiKhoan = tk and matKhau = 'admin';
END

//Update pass
CREATE DEFINER=`root`@`localhost` PROCEDURE `updateND`(
	in ma varchar(10),
    in mk varchar(100)
)
BEGIN
	UPDATE nguoidung SET  matKhau = mk WHERE maND = ma;
END

/add tieu chi
CREATE DEFINER=`root`@`localhost` PROCEDURE `addTieuchi`(
	in maTC int(11),
	in maTNTTVT varchar(50),
	in maTNTTDHTT varchar(50),
	in tenTC varchar(255),
	in chitietTC varchar(255),
	in diemtrucnTTVT float,
	in diemtruttTTVT float,
	in diemtrucnTTDHTT float,
	in diemtruttTTDHTT float
)
BEGIN
	INSERT INTO tieuchi(maTieuchi, maTN_TTVT, maTN_TTDHTT, tenTieuchi, chitietTieuchi, 
    mucdiemtrucnTTVT, mucdiemtruttTTVT, mucdiemtrucnTTDHTT, mucdiemtruttTTDHTT) 
    VALUES (maTC, maTNTTVT, maTNTTDHTT,tenTC, chitietTC, diemtrucnTTVT, diemtruttTTVT, diemtrucnTTDHTT, diemtruttTTDHTT);

END

//delete tieuchi

CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteTieuchi`(
	in maTC int(11)
)
BEGIN
		DELETE FROM tieuchi WHERE maTieuchi = maTC;
END


//edit tieu chi

CREATE DEFINER=`root`@`localhost` PROCEDURE `editTieuchi`(
	in maTC int(11),
	in maTNTTVT varchar(50),
	in maTNTTDHTT varchar(50),
	in tenTC varchar(255),
	in chitietTC varchar(255),
	in diemtrucnTTVT float,
	in diemtruttTTVT float,
	in diemtrucnTTDHTT float,
	in diemtruttTTDHTT float
)
BEGIN
	UPDATE tieuchi SET maTN_TTVT= maTNTTVT, maTN_TTDHTT= maTNTTDHTT, 
    tenTieuchi=tenTC, chitietTieuchi=chitietTC,
    mucdiemtrucnTTVT=diemtrucnTTVT,mucdiemtruttTTVT=mucdiemtruttTTVT,
    mucdiemtrucnTTDHTT=diemtrucnTTDHTT, mucdiemtruttTTDHTT=diemtruttTTDHTT
    WHERE maTieuchi = maTC;
END


//add kphieu
CREATE DEFINER=`root`@`localhost` PROCEDURE `addKyphieu`(
  in idKP varchar(10),
  in  idND varchar(10) ,
  in nameKP varchar(100),
  in startDate date,
  in endDate date,
  in months int(11),
  in note varchar(100))
BEGIN
  INSERT INTO kyphieu(maKyphieu,maND,tenKyphieu,ngayBatdau, ngayKetthuc, thang, ghichu)
  VALUES (idKP, idND, nameKP, startDate, endDate, months, note);
END

//edit kphieu

CREATE DEFINER=`root`@`localhost` PROCEDURE `editKyphieu`(
  in idKP varchar(10),
  in  idND varchar(10) ,
  in nameKP varchar(100),
  in startDate date,
  in endDate date,
  in months int(11),
  in note varchar(100)
)
BEGIN
UPDATE kyphieu SET maND=idND, tenKyphieu=nameKP, ngayBatdau=startDate, 
ngayKetthuc=endDate, thang=months,ghichu=note WHERE maKyphieu = idKP;

END

// delete kphieu

CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteKyphieu`(
IN idKP varchar(10)
)
BEGIN
DELETE FROM kyphieu WHERE maKyphieu = idKP;
END













